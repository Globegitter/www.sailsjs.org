<h1 id="one-to-many">One-to-Many</h1>
<h3 id="overview">Overview</h3>
<p>A one-to-many association states that a model can be associated with many other models. To build this<br>association a virtual attribute is added to a model using the <code>collection</code> property. In a one-to-many<br>association one side must have a <code>collection</code> attribute and the other side must contain a <code>model</code><br>attribute. This allows the many side to know which records it needs to get when a <code>populate</code> is used.</p>
<p>Because you may want a model to have multiple one-to-many associations on another model a <code>via</code> key<br>is needed on the <code>collection</code> attribute. This states which <code>model</code> attribute on the one side of the<br>association is used to populate the records.</p>
<h3 id="one-to-many-example">One-to-Many Example</h3>
<p><code>myApp/api/models/pet.js</code></p>
<pre><code class="lang-javascript">
module.exports = {

    attributes: {
        name:&#39;STRING&#39;,
        color:&#39;STRING&#39;,
        owner:{
            model:&#39;user&#39;
        }
    }

}</code></pre>
<p><code>myApp/api/models/user.js</code></p>
<pre><code class="lang-javascript">
module.exports = {

    attributes: {
        name:&#39;STRING&#39;,
        age:&#39;INTEGER&#39;,
        pets:{
            collection: &#39;pet&#39;,
            via: &#39;owner&#39;
        }
    }

}</code></pre>
<p>Using <code>sails console</code></p>
<pre><code class="lang-sh">
sails&gt; User.create({name:&#39;Mike&#39;,age:&#39;21&#39;}).exec(console.log)
null { pets: [Getter/Setter],
  name: &#39;Mike&#39;,
  age: 21,
  createdAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST),
  updatedAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST),
  id: 1 }

sails&gt; Pet.create({name:&#39;Pinkie Pie&#39;,color:&#39;pink&#39;,owner:1}).exec(console.log)
null { name: &#39;Pinkie Pie&#39;,
    color: &#39;pink&#39;,
    owner: 1,
    createdAt: Tue Feb 11 2014 17:58:04 GMT-0600 (CST),
    updatedAt: Tue Feb 11 2014 17:58:04 GMT-0600 (CST),
    id: 2 }

sails&gt; Pet.create({name:&#39;Applejack&#39;,color:&#39;orange&#39;,owner:1}).exec(console.log)
null { name: &#39;Applejack&#39;,
    color: &#39;orange&#39;,
    owner: 1,
    createdAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
    updatedAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
    id: 4 }

sails&gt; User.find().populate(&#39;pets&#39;).exec(function(err,r){console.log(r[0].toJSON())});
{ pets: 
   [ { name: &#39;Pinkie Pie&#39;,
       color: &#39;pink&#39;,
       id: 2,
       createdAt: Tue Feb 11 2014 17:58:04 GMT-0600 (CST),
       updatedAt: Tue Feb 11 2014 17:58:04 GMT-0600 (CST),
       owner: 1 },
     { name: &#39;Applejack&#39;,
       color: &#39;orange&#39;,
       id: 4,
       createdAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
       updatedAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
       owner: 1 } ],
  name: &#39;Mike&#39;,
  age: 21,
  createdAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST),
  updatedAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST),
  id: 1 }

sails&gt; Pet.find(4).populate(&#39;owner&#39;).exec(console.log)
null [ { name: &#39;Applejack&#39;,
    color: &#39;orange&#39;,
    owner: 
     { pets: [Getter/Setter],
       name: &#39;Mike&#39;,
       age: 21,
       id: 1,
       createdAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST),
       updatedAt: Tue Feb 11 2014 17:49:04 GMT-0600 (CST) },
    createdAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
    updatedAt: Tue Feb 11 2014 18:02:58 GMT-0600 (CST),
    id: 4 } ]</code></pre>
<h3 id="notes">Notes</h3>
<blockquote>
<p>For a more detailed description of this type of association, see the <a href="https://github.com/balderdashy/waterline-docs/blob/master/associations.md">Waterline Docs</a></p>
</blockquote>
