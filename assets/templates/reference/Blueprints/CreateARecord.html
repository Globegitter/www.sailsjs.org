<h1 id="create-a-record">Create A Record</h1>
<h3 id="purpose">Purpose</h3>
<p>Create a new model instance in the database.<br>Attributes can be sent in the HTTP body as form-encoded values or JSON.</p>
<h3 id="description">Description</h3>
<p>Responds with a JSON object representing the newly created instance.  If a validation error occurred, a JSON response with the invalid attributes and a <code>400</code> status code will be returned instead.</p>
<p>Additionally, a <code>create</code> event will be published to all listening sockets. </p>
<p>This is equivalent to running <code>Pony.publishCreate( theNewlyCreatedPony.toJSON() )</code> in a custom controller.</p>
<p>If the request is sent using socket.io, the requesting socket will ALSO be subscribed to &quot;updates&quot;+&quot;destroys&quot; on the newly created model instance returned (instance room). </p>
<p>This is equivalent to running <code>Pony.subscribe(req.socket, theNewlyCreatedPony)</code> in a custom controller.</p>
<h3 id="examples">Examples</h3>
<h4 id="create-a-record-rest-">Create a record (REST)</h4>
<p><code>POST http://localhost:1337/:model</code></p>
<p>Create a new pony named &quot;AppleJack&quot; with a hobby of &quot;pickin&quot;.</p>
<p><em>via Postman</em><br><code>POST</code> <code>&#39;http://localhost:1337/pony&#39;</code></p>
<h4 id="json-request-body">JSON Request Body</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;AppleJack&quot;,
  &quot;hobby&quot;: &quot;pickin&quot;,
}</code></pre>
<h4 id="example-response">Example Response</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;AppleJack&quot;,
  &quot;hobby&quot;: &quot;pickin&quot;,
  &quot;id&quot;: 47,
  &quot;createdAt&quot;: &quot;2013-10-18T01:23:56.000Z&quot;,
  &quot;updatedAt&quot;: &quot;2013-11-26T22:55:19.951Z&quot;
}</code></pre>
<h4 id="create-a-record-shortcuts-">Create a record (shortcuts)</h4>
<p><code>http://localhost:1337/:model/create?</code></p>
<p>via web browser</p>
<p><code>http://localhost:1337/pony/create?name=Shutterfly&amp;&amp;best_pony=yep</code></p>
<h4 id="expected-response">Expected Response</h4>
<pre><code class="lang-javascript">{
 &quot;name&quot;: &quot;Shutterfly&quot;,
 &quot;best_pony&quot;: &quot;yep&quot;,
 &quot;createdAt&quot;: &quot;2014-02-24T21:02:16.068Z&quot;,
 &quot;updatedAt&quot;: &quot;2014-02-24T21:02:16.068Z&quot;,
 &quot;id&quot;: 5
}</code></pre>
<h3 id="examples-with-one-way-associations">Examples with One Way Associations</h3>
<p>You can create associations between models in 2 different ways.  You can either make the association with a record that already exists OR you can create the associated record as you associate.  Check out the examples to see how. </p>
<p>These examples assume the existence of <code>Pet</code> and <code>Pony</code> APIs which can be created using the <a href="/#!documentation/reference/CommandLine/CommandLine.html">Sails CLI Tool</a>.  A One-To-One or a One Way association must have been configured for your models.  See <a href="http://omfgdogs.com">Model Association Docs</a> for info on how to do this.</p>
<h3 id="create-record-while-associating-w-existing-record-rest-">Create record while associating w/ existing record (REST)</h3>
<p><code>POST http://localhost:1337/:model</code></p>
<p>Create a new pony named &quot;Pinkie Pie&quot; and associate it with an existing pet named &quot;Gummy&quot; which has an <code>id</code> of 10.  </p>
<p>via Postman</p>
<p><code>POST http://localhost:1337/pony</code></p>
<h4 id="json-request-body">JSON Request Body</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Pinkie Pie&quot;,
  &quot;hobby&quot;: &quot;ice skating&quot;,
  &quot;pet&quot;: 10
}</code></pre>
<h4 id="example-response">Example Response</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Pinkie Pie&quot;,
  &quot;hobby&quot;: &quot;ice skating&quot;,
  &quot;pet&quot;: {
    &quot;name&quot;: &quot;Gummy&quot;,
    &quot;species&quot;: &quot;crocodile&quot;,
    &quot;id&quot;: 10
  },
  &quot;id&quot;: 4,
  &quot;createdAt&quot;: &quot;2013-10-18T01:22:56.000Z&quot;,
  &quot;updatedAt&quot;: &quot;2013-11-26T22:54:19.951Z&quot;
}</code></pre>
<h3 id="create-new-record-while-associating-w-another-new-record-rest-">Create new record while associating w/ another new record (REST)</h3>
<p><code>POST http://localhost:1337/:model</code></p>
<p>Create a new pony named &quot;Pinkie Pie&quot;, an &quot;ice skating&quot; hobby, and a new pet named &quot;Gummy&quot;.</p>
<p>via Postman</p>
<p><code>POST http://localhost:1337/pony</code></p>
<h4 id="json-request-body">JSON Request Body</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Pinkie Pie&quot;,
  &quot;hobby&quot;: &quot;ice skating&quot;,
  &quot;pet&quot;: {
    &quot;name&quot;: &quot;Gummy&quot;,
    &quot;species&quot;: &quot;crocodile&quot;
  }
}</code></pre>
<h4 id="expected-response">Expected Response</h4>
<pre><code class="lang-json">{
  &quot;name&quot;: &quot;Pinkie Pie&quot;,
  &quot;hobby&quot;: &quot;ice skating&quot;,
  &quot;pet&quot;: {
    &quot;name&quot;: &quot;Gummy&quot;,
    &quot;species&quot;: &quot;crocodile&quot;
    &quot;id&quot;: 10
  },
  &quot;id&quot;: 4,
  &quot;createdAt&quot;: &quot;2013-10-18T01:22:56.000Z&quot;,
  &quot;updatedAt&quot;: &quot;2013-11-26T22:54:19.951Z&quot;
}</code></pre>
<h3 id="examples-with-many-to-many-associations">Examples with Many-To-Many Associations</h3>
<p>Waterline does not currently support creating new records that are configured for a Many-To-Many association while simoultaniously making that association with another record.  Because of this, it cannot be done using blueprints.  Instead, you will have to do a create followed by an update.</p>
<h3 id="notes">Notes</h3>
<blockquote>
<p>JSON keys and values must be wrapped in double quotes.  Singles won&#39;t work.</p>
</blockquote>
